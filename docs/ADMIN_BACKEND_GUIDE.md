# 管理后台使用指南

## 概述

管理后台是一个功能完整的用户权限管理系统，提供了用户管理、权限控制、订阅管理、系统监控等核心功能。

## 快速开始

### 访问管理后台

1. 确保您已登录并具有管理员权限
2. 访问 `/admin` 路径
3. 系统会自动验证您的权限

### 导航结构

管理后台采用侧边栏导航设计，包含以下主要模块：

- **仪表板** (`/admin`) - 系统概览和快速统计
- **快速访问** (`/admin/quick-access`) - 常用功能快捷入口
- **用户管理** (`/admin/users`) - 用户账户管理
- **权限管理** (`/admin/permissions`) - 权限分配和管理
- **订阅管理** (`/admin/subscriptions`) - 订阅状态管理
- **系统管理** (`/admin/system`) - 系统设置和配置
- **数据统计** (`/admin/analytics`) - 数据分析和报表
- **日志管理** (`/admin/logs`) - 系统日志查看
- **API管理** (`/admin/api`) - API密钥和配置

## 功能详解

### 1. 仪表板

仪表板提供系统的整体概览：

- **统计卡片**：显示关键指标（用户数、收入、转化率等）
- **快速操作**：常用功能的快捷入口
- **最近活动**：系统最新动态

### 2. 快速访问

按功能分类的快捷入口页面：

- **用户相关**：用户查看、添加、批量导入
- **权限管理**：权限分配、角色管理、权限审计
- **订阅管理**：订阅概览、批量操作、支付管理
- **系统维护**：系统状态、日志查看、数据备份

### 3. 用户管理

完整的用户账户管理功能：

- **用户列表**：查看所有用户信息
- **搜索过滤**：按邮箱、状态等条件搜索
- **用户编辑**：修改用户信息和权限
- **用户删除**：删除用户账户
- **批量操作**：批量管理用户

### 4. 权限管理

细粒度的权限控制系统：

- **用户选择**：从左侧选择要管理的用户
- **权限分配**：为选中的用户分配特定权限
- **权限分类**：按功能模块分类权限
- **实时更新**：权限变更立即生效

### 5. 订阅管理

订阅和套餐管理功能：

- **订阅统计**：订阅数量、收入等统计信息
- **用户订阅**：查看用户的订阅状态
- **批量操作**：批量升级、取消、重新激活订阅
- **订阅详情**：查看订阅的详细信息

### 6. 系统管理

系统配置和维护工具：

- **系统信息**：版本、环境等基本信息
- **环境配置**：各种服务的配置状态
- **系统状态**：各服务的运行状态
- **维护工具**：缓存清理、数据备份等
- **安全设置**：两步验证、IP白名单等
- **通知设置**：系统通知配置

### 7. 数据统计

数据分析和报表功能：

- **用户增长**：用户注册趋势图
- **收入统计**：收入趋势分析
- **套餐分布**：各套餐用户分布
- **活跃度统计**：用户活跃度分析
- **功能使用**：各功能使用率统计

### 8. 日志管理

系统日志查看和管理：

- **日志统计**：总日志数、错误日志等统计
- **日志过滤**：按级别、时间、用户等过滤
- **日志列表**：详细的日志记录
- **日志导出**：导出日志数据

### 9. API管理

API密钥和访问管理：

- **API统计**：密钥数量、调用次数等统计
- **密钥管理**：创建、编辑、删除API密钥
- **权限控制**：为密钥分配不同权限
- **使用统计**：API调用统计和监控

## 权限系统

### 权限级别

系统采用基于角色的权限控制（RBAC）：

- **管理员权限** (`ADMIN_ACCESS`) - 完全访问权限
- **用户管理权限** (`USER_MANAGEMENT`) - 用户管理权限
- **订阅管理权限** (`SUBSCRIPTION_MANAGEMENT`) - 订阅管理权限
- **系统管理权限** (`SYSTEM_MANAGEMENT`) - 系统管理权限

### 权限检查

系统在多个层面进行权限检查：

1. **服务器端**：API路由和中间件检查
2. **客户端**：React组件和hooks检查
3. **路由保护**：页面级别的权限验证

## 安全特性

### 身份验证

- 基于NextAuth的身份验证
- 支持Google OAuth和邮箱密码登录
- 会话管理和自动续期

### 权限验证

- 多层权限检查机制
- 细粒度权限控制
- 权限变更审计

### 数据保护

- 敏感数据加密存储
- API密钥安全管理
- 操作日志记录

## 使用技巧

### 1. 快速导航

- 使用侧边栏快速切换功能模块
- 利用面包屑导航了解当前位置
- 使用快速访问页面找到常用功能

### 2. 批量操作

- 在用户管理中使用批量选择
- 在订阅管理中使用批量操作
- 在日志管理中使用批量导出

### 3. 搜索和过滤

- 使用搜索框快速查找用户
- 使用过滤器缩小结果范围
- 使用排序功能整理数据

### 4. 数据导出

- 导出用户列表为CSV
- 导出日志数据进行分析
- 导出统计数据制作报表

## 常见问题

### Q: 如何添加新的管理员用户？

A: 在用户管理页面找到目标用户，点击编辑，在权限管理中添加 `ADMIN_ACCESS` 权限。

### Q: 如何批量修改用户权限？

A: 在权限管理页面，可以逐个为用户分配权限，或使用批量操作功能。

### Q: 如何查看系统运行状态？

A: 在系统管理页面可以查看各服务的运行状态和配置信息。

### Q: 如何导出用户数据？

A: 在用户管理页面使用导出功能，支持CSV格式导出。

### Q: 如何管理API密钥？

A: 在API管理页面可以创建、编辑、删除API密钥，并查看使用统计。

## 技术支持

如果您在使用过程中遇到问题，请：

1. 查看系统日志了解错误信息
2. 检查权限配置是否正确
3. 联系技术支持团队

## 更新日志

### v1.0.0
- 初始版本发布
- 基础用户管理功能
- 权限控制系统
- 订阅管理功能
- 系统监控功能 